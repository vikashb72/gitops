gateways:
  httpbin-gateway:
    namespace: istio-ingress
    gateway: istio
    listeners:
      - name: httpbin-http
        hostname: "httpbin.minikube.where-ever.net"
        port: 80
        protocol: HTTP
        allowedRoutes:
          namespaces:
            from: All
    httproutes:
      - name: httpbin
        namespace: httpbin
        hostnames: '["httpbin.minikube.where-ever.net"]'
        rules:
          - matches:
              - path:
                type: PathPrefix
                value: /get
              - path:
                type: PathPrefix
                value: /headers
            filters:
              - type: RequestHeaderModifier
                requestHeaderModifier:
                  add:
                  - name: Added-Header
                    value: added-value
            backendRefs:
            - name: httpbin
              port: 8000
  echoserver-gateway:
    namespace: echoserver
    gateway: istio
    listeners:
      - name: echoserver-http
        hostname: "echoserver.minikube.where-ever.net"
        port: 80
        proto: HTTP
        allowedRoutes:
          namespaces:
            from: Same
    httproutes:
      - name: echoserver
        namespace: echoserver
        hostnames: '["echoserver.minikube.where-ever.net"]'
        rules:
          - matches:
              - path: Exact
                value: /
            backendRefs:
              - name: echoserver
                port: 8080
