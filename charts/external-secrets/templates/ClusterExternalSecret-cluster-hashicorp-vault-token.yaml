apiVersion: external-secrets.io/v1beta1
kind: ClusterExternalSecret
metadata:
  name: "cluster-hashicorp-vault-token"
spec:
  externalSecretName: "cluster-hashicorp-vault-token"
  refreshTime: "5m"
  externalSecretSpec:
    secretStoreRef:
      name: hashicorp-vault-backend
      kind: ClusterSecretStore
    refreshInterval: "1h"
    target:
      name: cluster-hashicorp-vault-token
    data:
      - secretKey: vault.key
        remoteRef:
          key: "kv/{{ .Values.env.EVT }}/vault/tls"
          property: vault.key
      - secretKey: vault.crt
        remoteRef:
          key: "kv/{{ .Values.env.EVT }}/vault/tls"
          property: vault.crt
      - secretKey: vault.ca
        remoteRef:
          key: "kv/{{ .Values.env.EVT }}/vault/tls"
          property: vault.ca
      - secretKey: vault.unseal
        remoteRef:
          key: "kv/{{ .Values.env.EVT }}/vault/transit/unseal"
          property: token
