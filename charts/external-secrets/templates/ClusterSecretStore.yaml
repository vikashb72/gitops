{{- range $key, $value := .Values.ClusterSecretStores -}}
{{- if not .disable }}
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: {{ $key }}
  namespace: {{ default $.Values.env.namespace .namespace }}
spec:
  provider:
    {{ $value.provider }}:
{{- if .authType }}
      authType: {{ .authType }}
{{- end }}
{{- if .tenantId }}
      tenantId: {{ .tenantId }}
{{- end }}
{{- if .vaultUrl }}
      vaultUrl: {{ .vaultUrl }}
{{- end }}
{{- if .serviceAccountRef }}
      serviceAccountRef:
        name: {{ .serviceAccountRef }}
{{- end }}
{{- if .authSecretRef }}
      authSecretRef:
{{- if .authSecretRef.clientId }}
        clientId: 
          name: {{ .authSecretRef.clientId.name }}
          key: {{ .authSecretRef.clientId.key }}
{{- end }}
{{- if .authSecretRef.clientSecret }}
        clientSecret:
          name: {{ .authSecretRef.clientSecret.name }}
          key: {{ .authSecretRef.clientSecret.key }}
{{- end }}
{{- if .authSecretRef.tenantId }}
        tenantId:
          name: {{ .authSecretRef.tenantId.name }}
          key: {{ .authSecretRef.tenantId.key }}
{{- end }}
{{- if .authSecretRef.vaultUrl }}
        vaultUrl:
          name: {{ .authSecretRef.vaultUrl.name }}
          key: {{ .authSecretRef.vaultUrl.key }}
{{- end }}
{{- end }}
{{- end }}
{{- end }}
