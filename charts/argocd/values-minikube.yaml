env:
  EVT: minikube
  bootstrapMode: true

Projects:
  minikube:
    description: Minikube Infrastructure
  shared:
    description: Shared Infrastructure
  apps:
    description: Apps Infrastructure

argo-cd:
  crds:
    install: true
  namespaceOverride: "argocd"
  createAggregateRoles: true
  openshift:
    enabled: false
  ## Globally shared configuration
  global:
    # -- Default domain used by all components
    ## Used for ingresses, certificates, SSO, notifications, etc.
    domain: argocd.minikube.where-ever.net
  configs:
    cm:
      accounts.argo-admin: apiKey, login
      accounts.argo-readonly: apiKey, login
  rbac:
    policy.default: ''
    policy.csv: |
      p, role:org-admin, applications, *, */*, allow
      p, role:org-admin, clusters, get, *, allow
      p, role:org-admin, repositories, *, *, allow
      p, role:org-admin, logs, get, *, allow
      p, role:org-admin, exec, create, */*, allow
      p, role:readonly, applications, get, *, allow
      g, argo-admin, role:org-admin
      g, argo-readonly, role:readonly

  server:
    #extraArgs:
    #  - --staticassets
    #  - /shared/app
    #  - --redis
    #  - argocd-redis:6379
    #  - --insecure
    #  - --basehref
    #  - /argocd
    #  - --rootpath
    #  - /argocd
    env:
      - name: ARGOCD_MAX_CONCURRENT_LOGIN_REQUESTS_COUNT
        value: "0"
    service:
      type: LoadBalancer
      loadBalancerIP: 192.168.49.225
    metrics:
      enabled: true
      serviceMonitor:  
        enabled: true
  repoServer:
    metrics:
      enabled: true
      serviceMonitor:  
        enabled: true
  applicationSet:
    metrics:
      enabled: true
      serviceMonitor:  
        enabled: true
  notifications:
    metrics:
      enabled: true
      serviceMonitor:  
        enabled: true

argo-workflows:
  namespaceOverride: "argocd"
  workflow:
    serviceAccount:
      create: true
      name: "argo-workflow"
    rbac:
      create: true
  controller:
    workflowDefaults:
      spec:
        serviceAccountName: argo-workflow
  metricsConfig:
    enabled: true
